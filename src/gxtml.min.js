(function t(i,e,n){window.GXTML={NAME:"GXTML",VERSION:"0.1.0 Beta",WIDTH:i.innerWidth,HEIGHT:i.innerHeight,TYPE:e.userAgent,create:function(t){if(!t)return null;var e,o,s=n.body,h=null;if(r(s).width="100%",r(s).height="100%",r(s).margin="0",r(s).padding="0",t.id&&null==(s=n.body.querySelector("#"+t.id))&&(s=n.body),r(s).position="fixed",t._GXTML_Game_="game"+Math.random(),t.id=t.id?t.id:"",t.view=s,t.object=[],t.add=function(i){i._GXTML_Object_&&(t.object.push(i),t.view.insertBefore(i.V,t.view.querySelectorAll("script")[0]))},t.get=function(i){if("string"!=typeof i)return t.object[i];for(var e in t.object)if(t.object[e].id==i)return t.object[e]},t.each=function(i){for(var e in t.object)i(t.object[e])},t.del=function(i){t.object.splice(i,1),s.removeChild(i.V)},t.init=function(){r(n.body).backgroundColor=t.color?t.color:"black",t.background&&"string"==typeof t.background&&t.add(GXTML.object({_GXTML_Background_:!0,x:0,y:0,width:GXTML.WIDTH,height:GXTML.HEIGHT,sprite:t.background}))},t.start=function(){return!1==t.stucked},t.stop=function(){return!0==t.stucked},t.on=function(t,e){return i.addEventListener(t,e)},t.destroy=function(){for(var i in t.object=[],clearInterval(h),s.children)s.removeChild(s.children[i]);t.dispose&&t.dispose()},t.orientation){if("portrait"==t.orientation){if(t.width>t.height)return alert("GXTML - Error:\nGame Only Support Portrait!"),null}else if(t.width<t.height)return alert("GXTML - Error:\nGame Only Support Landscape!"),null}for(e in t.init(),t)t.add(t[e]);var d=n.body.querySelector("gxtml["+t.id+"]"),l=GXTML.children?Array.from(d.children).reverse():null;if(null!=d){var e,o,u=null,c={};for(e in l)if(l[e].constructor.toString().includes("Element")){for(o in l[e].attributes)c[l[e].attributes[o].name]=l[e].attributes[o].value;u=GXTML.object(c),t[l[e].tagName.toLowerCase()]=u,t.add(u)}d.remove()}return t.setup&&t.setup(t),h=setInterval(function(){var i,e;if(!t.stucked){for(e in t.object)(i=t.object[e])._GXTML_Object_();t.update&&t.update(t)}},1),null==GXTML.mouseX&&null==GXTML.mouseY&&t.on("mousemove",function(t){i.GXTML.mouseX=t.clientX,i.GXTML.mouseY=GXTML.HEIGHT-t.clientY}),t},object:function(t){if(!t)return null;var i={V:t.V?t.V:n.createElement("div"),x:t.x?t.x:0,velX:0,y:t.y?t.y:0,velY:0,rotate:t.rotate?t.rotate:0,flipX:t.flipX?t.flipX:1,flipY:t.flipY?t.flipY:1,width:t.width?t.width:0,height:t.height?t.height:0,bound:t.bound?t.bound:[0,0],color:t.color?t.color:"",border:t.border?t.border:"",corner:t.corner?t.corner:"0",sprite:t.sprite?t.sprite:"",CSS:t.CSS?t.CSS:"",_GXTML_Object_:function(){if(0!=this.velX&&(this.x+=this.velX),0!=this.velY&&(this.y+=this.velY),r(this.V).transform="translate(x,y) rotate(deg) scaleX(flipX) scaleY(flipY)".split("x").join(this.x+"px").split("y").join(-1*this.y+(GXTML.HEIGHT-this.height)+"px").split("deg").join(this.rotate+"deg").split("flipX").join(this.flipX).split("flipY").join(this.flipY),r(this.V).width=this.width+"px",r(this.V).height=this.height+"px",""!=this.color&&(r(this.V).backgroundColor=this.color),""!=this.border&&(r(this.V).border="1px solid "+this.border),""!=this.corner&&(r(this.V).borderRadius=this.corner+"px"),""!=this.sprite&&(r(this.V).backgroundImage="url("+this.sprite+")",r(this.V).backgroundSize="cover",r(this.V).backgroundPosition="center"),""!=this.CSS){var t=this.V.getAttribute("style");null!=t&&this.V.setAttribute("style",t+this.CSS)}this.update&&this.update()},create:function(t){this.isDestroyed&&(delete this.isDestroyed,t.add(this))},id:function(t){return t&&(this.V.id=t),this},on:function(t,i){var e=this;return this.V.addEventListener(t,function(t){i(e,t)}),this},visible:function(t){this.isVisible=t,t?r(this.V).display="":r(this.V).display="none"},isVisible:!0,anim:function(t,i,e){return null!=this.anim["f"+e]?this.anim["f"+e]<10*e&&this.anim["f"+e]++:this.anim["f"+e]=0,null!=this.anim.index?this.anim["f"+e]==10*e&&(this.anim.index<i?(this.anim["f"+e]=0,this.sprite=t.split("$").join(this.anim.index),this.anim.index++):this.anim.index=0):this.anim.index=0,this},collide:function(t){var i=this.V.getBoundingClientRect(),e=t.V.getBoundingClientRect(),n=e.bottom-t.bound[1]>i.top+this.bound[1]&&e.right-t.bound[0]>i.left+this.bound[0]&&e.top+t.bound[1]<i.bottom-this.bound[1]&&e.left+t.bound[0]<i.right-this.bound[0];return this.isCollided=n,n},isCollided:!1,move:function(t,i){return 0!=t&&(this.velX=t),i&&0!=i&&(this.velY=i),this},follow:function(t,i,e){var n=t-this.width/2,r=i-this.height/2;return e?{x:n,y:r}:(this.x=n,this.y=r,this)},destroy:function(t){this.isDestroyed||(this.isDestroyed=!0,t.del(this))}};return r(i.V).position="fixed",t.id&&(i.V.id=t.id),i._GXTML_Object_(),i},rect:function(t,i,e,n,r){return null==r&&(r={}),r.x=t,r.y=i,r.width=e,r.height=n,this.object(r)},circle:function(t,i,e,n){return null==n&&(n={}),n.x=t,n.y=i,n.width=e,n.height=e,n.corner="100",this.object(n)},dom:function(t,i,e,r,o,s){null==s&&(s={});var h,d,o="string"==typeof o?n.querySelector(o):o;if(s.x=t,s.y=i,s.width=e,s.height=r,h=this.object(s),o.constructor==Array)for(d in o)h.V.appendChild(o[d]);else h.V.appendChild(o);return h},size:function(t,i){if(!t||!i||!(t>0))return i?GXTML.HEIGHT/(GXTML.sizeY/i):GXTML.WIDTH/(GXTML.sizeX/t);GXTML.sizeX=t,GXTML.sizeY=i}};function r(t){return t.style}})(window,navigator,document);